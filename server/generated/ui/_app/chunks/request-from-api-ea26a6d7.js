var l=Object.defineProperty;var a=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var c=(t,e,s)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,r=(t,e)=>{for(var s in e||(e={}))y.call(e,s)&&c(t,s,e[s]);if(a)for(var s of a(e))L.call(e,s)&&c(t,s,e[s]);return t};import{n as i}from"./notifications-9151d538.js";const g=t=>{console.error(t),typeof t=="string"&&i.add("error",t),t instanceof Error&&i.add("error",t.message)},k=(t,e)=>{const s=e instanceof URLSearchParams;return e&&!s&&(e=new URLSearchParams(e)),e?`${t}?${e}`:t},x="",S=t=>t.split("/").map(e=>encodeURIComponent(e)).join("/"),$=async(t,e={},s=10)=>{const{params:f={},options:u,request:h=fetch,token:n,shouldRetry:m=!0,retryInterval:w=5e3}=e;t.startsWith("/")||(t="/"+t);const P=n?{next_page_token:n}:{},R=new URLSearchParams(r(r({},f),P)),U=k(x+"/api/v1"+S(t),R);try{const o=await h(U,u);if(!o.ok)throw new Error(`${o.status}: ${o.statusText}`);return await o.json()}catch(o){if(g(o),m&&s>0)return new Promise(d=>{setTimeout(()=>{d($(t,e,s-1))},w)})}};export{g as h,$ as r};
